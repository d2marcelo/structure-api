{"version":3,"sources":["../../src/services/template.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;;;IAEM,e;;;;;;;6BAEe;AAAA,UAAZ,CAAY,yDAAR,EAAQ;AAAA,UAAJ,EAAI;;AACjB,UAAI,QAAQ,IAAZ;;AAEA,UAAI,MAAM,sBAAc,EAAd,EAAkB,CAAlB,CAAV;;;;AAIA,UAAI,iBAAoB,uBAAxB;AAAA,UACI,gBAAoB,wBADxB;;AAGA,oBAAc,MAAd,CAAqB,GAArB,EAA0B,UAAS,GAAT,EAAc,GAAd,EAAmB;;AAE3C,YAAG,GAAH,EAAQ;AACN,yBAAO,KAAP,CAAa,GAAb;;AAEA,iBAAO,GAAG;AACR,qBAAS,2BADD;AAER,sBAAU;AAFF,WAAH,CAAP;AAID;;AAED,YAAI,MAAM,eAAe,KAAf,CAAqB,IAAI,EAAzB,CAAV;;AAEA,cAAM,MAAN,CAAa,IAAI,EAAjB,EAAqB,EAAC,QAAD,EAArB,EAA4B,UAAS,IAAT,EAAe,IAAf,EAAqB;;AAE/C,cAAG,GAAH,EAAQ;AACN,2BAAO,KAAP,CAAa,GAAb;;AAEA,mBAAO,GAAG;AACR,uBAAS,wCADD;AAER,wBAAU;AAFF,aAAH,CAAP;AAID;;AAED,iBAAO,GAAG,IAAH,EAAS,IAAT,CAAP;AAED,SAbD;AAeD,OA5BD;AA8BD;;;0BAEK;AACJ,UAAI,gBAAgB,wBAApB;;AAEA,oBAAc,GAAd,CAAkB,KAAlB,CAAwB,aAAxB,EAAuC,SAAvC;AACD;;;mCAEc;AACb,UAAI,gBAAgB,wBAApB;;AAEA,oBAAc,YAAd,CAA2B,KAA3B,CAAiC,aAAjC,EAAgD,SAAhD;AACD;;;6BAEQ;AACP,UAAI,gBAAgB,wBAApB;;AAEA,oBAAc,MAAd,CAAqB,KAArB,CAA2B,aAA3B,EAA0C,SAA1C;AACD;;;sCAEiB;AAChB,UAAI,gBAAgB,wBAApB;;AAEA,oBAAc,eAAd,CAA8B,KAA9B,CAAoC,aAApC,EAAmD,SAAnD;AACD;;;;;kBAIY,e","file":"template.js","sourcesContent":["import async             from 'async'\nimport {chalk, logger}   from '../lib/logger'\nimport OrganizationModel from '../models/organization'\nimport ShortIdService    from '../services/short-id'\nimport TemplateModel     from '../models/template'\n\nclass TemplateService {\n\n  create(o = {}, cb) {\n    var _this = this\n\n    var pkg = Object.assign({}, o)\n\n    // validation\n\n    var shortidService    = new ShortIdService(),\n        templateModel     = new TemplateModel()\n\n    templateModel.create(pkg, function(err, res) {\n\n      if(err) {\n        logger.error(err)\n\n        return cb({\n          message: 'Could not create template',\n          resource: 'TemplateService'\n        })\n      }\n\n      var sid = shortidService.issue(res.id)\n\n      _this.update(res.id, {sid}, function(err2, res2) {\n\n        if(err) {\n          logger.error(err)\n\n          return cb({\n            message: 'Could not create short id for template',\n            resource: 'TemplateService'\n          })\n        }\n\n        return cb(null, res2)\n\n      })\n\n    })\n\n  }\n\n  get() {\n    var templateModel = new TemplateModel()\n\n    templateModel.get.apply(templateModel, arguments)\n  }\n\n  getByShortId() {\n    var templateModel = new TemplateModel()\n\n    templateModel.getByShortId.apply(templateModel, arguments)\n  }\n\n  update() {\n    var templateModel = new TemplateModel()\n\n    templateModel.update.apply(templateModel, arguments)\n  }\n\n  updateByShortId() {\n    var templateModel = new TemplateModel()\n\n    templateModel.updateByShortId.apply(templateModel, arguments)\n  }\n\n}\n\nexport default TemplateService\n"]}