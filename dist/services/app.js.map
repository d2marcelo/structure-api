{"version":3,"sources":["../../src/services/app.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;AACA;;;;;;IAEM,U;;;;;;;6BAEe;AAAA,UAAZ,CAAY,yDAAR,EAAQ;AAAA,UAAJ,EAAI;;AACjB,UAAI,QAAQ,IAAZ;;AAEA,UAAI,MAAM,sBAAc,EAAd,EAAkB,CAAlB,CAAV;;;;AAIA,UAAI,iBAAkB,uBAAtB;AAAA,UACI,WAAa,mBADjB;;AAGA,eAAS,MAAT,CAAgB,GAAhB,EAAqB,UAAS,GAAT,EAAc,GAAd,EAAmB;;AAEtC,YAAG,GAAH,EAAQ;AACN,yBAAO,KAAP,CAAa,GAAb;;AAEA,iBAAO,GAAG;AACR,qBAAS,sBADD;AAER,sBAAU;AAFF,WAAH,CAAP;AAID;;AAED,YAAI,MAAM,eAAe,KAAf,CAAqB,IAAI,EAAzB,CAAV;;AAEA,cAAM,MAAN,CAAa,IAAI,EAAjB,EAAqB,EAAC,QAAD,EAArB,EAA4B,UAAS,IAAT,EAAe,IAAf,EAAqB;;AAE/C,cAAG,GAAH,EAAQ;AACN,2BAAO,KAAP,CAAa,GAAb;;AAEA,mBAAO,GAAG;AACR,uBAAS,mCADD;AAER,wBAAU;AAFF,aAAH,CAAP;AAID;;AAED,iBAAO,GAAG,IAAH,EAAS,IAAT,CAAP;AAED,SAbD;AAeD,OA5BD;AA8BD;;;0BAEK;AACJ,UAAI,WAAW,mBAAf;;AAEA,eAAS,GAAT,CAAa,KAAb,CAAmB,QAAnB,EAA6B,SAA7B;AACD;;;mCAEc;AACb,UAAI,WAAW,mBAAf;;AAEA,eAAS,YAAT,CAAsB,KAAtB,CAA4B,QAA5B,EAAsC,SAAtC;AACD;;;6BAEQ;AACP,UAAI,WAAW,mBAAf;;AAEA,eAAS,MAAT,CAAgB,KAAhB,CAAsB,QAAtB,EAAgC,SAAhC;AACD;;;sCAEiB;AAChB,UAAI,WAAW,mBAAf;;AAEA,eAAS,eAAT,CAAyB,KAAzB,CAA+B,QAA/B,EAAyC,SAAzC;AACD;;;;;kBAIY,U","file":"app.js","sourcesContent":["import AppModel        from '../models/app'\nimport async           from 'async'\nimport {chalk, logger} from '../lib/logger'\nimport ShortIdService  from '../services/short-id'\n\nclass AppService {\n\n  create(o = {}, cb) {\n    var _this = this\n\n    var pkg = Object.assign({}, o)\n\n    // validation\n\n    var shortidService  = new ShortIdService(),\n        appModel   = new AppModel()\n\n    appModel.create(pkg, function(err, res) {\n\n      if(err) {\n        logger.error(err)\n\n        return cb({\n          message: 'Could not create app',\n          resource: 'AppService'\n        })\n      }\n\n      var sid = shortidService.issue(res.id)\n\n      _this.update(res.id, {sid}, function(err2, res2) {\n\n        if(err) {\n          logger.error(err)\n\n          return cb({\n            message: 'Could not create short id for app',\n            resource: 'AppService'\n          })\n        }\n\n        return cb(null, res2)\n\n      })\n\n    })\n\n  }\n\n  get() {\n    var appModel = new AppModel()\n\n    appModel.get.apply(appModel, arguments)\n  }\n\n  getByShortId() {\n    var appModel = new AppModel()\n\n    appModel.getByShortId.apply(appModel, arguments)\n  }\n\n  update() {\n    var appModel = new AppModel()\n\n    appModel.update.apply(appModel, arguments)\n  }\n\n  updateByShortId() {\n    var appModel = new AppModel()\n\n    appModel.updateByShortId.apply(appModel, arguments)\n  }\n\n}\n\nexport default AppService\n"]}